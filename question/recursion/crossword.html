<script>
    //‘+’ have to be left as they are. Cells marked with a ‘-‘ need to be filled up 
    let input = [
        ['+', '+', '+', '+', '+', '+', '+', '+', '+', '-'],
        ['-', '+', '+', '+', '+', '+', '+', '+', '+', '-'],
        ['-', '-', '-', '-', '-', '-', '-', '+', '+', '-'],
        ['-', '+', '+', '+', '+', '+', '+', '+', '+', '-'],
        ['-', '+', '+', '+', '+', '+', '+', '+', '+', '-'],
        ['-', '+', '+', '+', '+', '-', '-', '-', '-', '-'],
        ['-', '-', '-', '-', '-', '-', '+', '+', '+', '-'],
        ['-', '+', '+', '+', '+', '+', '+', '+', '+', '-'],
        ['+', '-', '-', '-', '-', '-', '-', '-', '-', '-'],
        ['+', '+', '+', '+', '+', '+', '+', '+', '+', '+']];
    const words = ['geography', 'history', 'chemistry', 'physics', 'maths', 'civics'];
    /*
    +++++++++-
    -++++++++-
    -------++-
    -++++++++-
    -++++++++-
    -++++-----
    ------+++-
    -++++++++-
    +---------
    ++++++++++

    
    +++++++++C
    P++++++++H
    HISTORY++E
    Y++++++++M
    S++++++++I
    I++++MATHS
    CIVICS+++T
    S++++++++R
    +GEOGRAPHY
    ++++++++++


backtrack_solver(crossword)
    if(no more cells are there to explore)
        return true
    for(all available possibilities)
        try one possibility p
        if(backtrack_solver(crossword with possibility p made) is true)
            return true
        unmake possibility p
    return false
        */

    function isSafeRight(crossword, words, i, j, wordIdx) {
        if (crossword[i][j] == "-" || crossword[i][j] == words[wordIdx][0]) {
            if (j > 0 && crossword[i][j - 1] != '+') {
                return false;
            }

            if (j + words[wordIdx] - 1 >= crossword[0].length || ((j + words[wordIdx].length < crossword[0].length) && (crossword[i][j + words[wordIdx].length] != '+'))) {
                return false;
            }
            for (let jj = 0; jj < words[wordIdx].length; jj++) {
                if (crossword[i][j + jj] == "-" || crossword[i][j + jj] == words[wordIdx][jj]) {
                    continue;
                } else {
                    return false;
                }
            }
            return true
        }
        return false;
    }
    function placeRight(crossword, word, i, j, wordIdx) {
        let placed = new Array();

        for (let jj = 0; jj < crossword.length; jj++) {
            let row = [];
            for (let k = 0; k < crossword[jj].length; k++) {
                row.push(false);
            }
            placed.push(row);
        }

        for (let jj = 0; jj < words[wordIdx].length; jj++) {
            crossword[i][j + jj] = words[wordIdx][jj];
            placed[i][j + jj] = true;
        }
        console.log("placed", JSON.stringify(placed));
        return placed;
    }
    function unPlaceRight(crossword, words, i, j, wordIdx, placed) {
        //console.log("revb unplaced", JSON.stringify(placed));
        for (let jj = j; jj <= words[wordIdx].length; jj++) {
            if (placed[i][jj] == true) {
                crossword[i][jj] = '-';
                placed[i][jj] = false;
            }
        }
        console.log("crossword", JSON.stringify(crossword));
    }
    function isSafeDown(crossword, words, i, j, wordIdx) {
        if (crossword[i][j] == "-" || crossword[i][j] == words[wordIdx][0]) {
            if (i + words[wordIdx].length > crossword[0].length) {
                return false;
            }


            for (let ii = 0; ii < words[wordIdx].length; ii++) {
                if (crossword[i + ii][j] == "-" || crossword[i + ii][j] == words[wordIdx][ii]) {
                    continue;
                } else {
                    return false;
                }
            }
            return true
        }
        return false;
    }
    function placeDown(crossword, word, i, j, wordIdx) {
        let placed = new Array();

        for (let jj = 0; jj < crossword.length; jj++) {
            let row = [];
            for (let k = 0; k < crossword[jj].length; k++) {
                row.push(false);
            }
            placed.push(row);
        }

        for (let ii = 0; ii < words[wordIdx].length; ii++) {
            crossword[i + ii][j] = words[wordIdx][ii];
            placed[i + ii][j] = true;
        }
        return placed;
    }
    function unPlaceDown(crossword, words, i, j, wordIdx, placed) {
        for (let ii = i; ii < words[wordIdx].length; ii++) {
            if (placed[ii][j] == true) {
                crossword[ii][j] = '-';
            }
        }
    }
    function solv(crossword, words, wordIdx) {
        //console.log(JSON.stringify(crossword));
        crossword.map((cb, i) => console.log(crossword[i]));
        if (wordIdx == words.length) {
            console.log("solved");
            crossword.map((cb, i) => console.log(crossword[i]));
            return
        }
        for (let i = 0; i < crossword.length; i++) {
            for (let j = 0; j < crossword[0].length; j++) {
                if (crossword[i][j] == '-' || words[wordIdx][0] == crossword[i][j]) {

                    if (isSafeRight(crossword, words, i, j, wordIdx)) {
                        console.log('safe for ', words[wordIdx]);
                        let placed = placeRight(crossword, words, i, j, wordIdx);
                        solv(crossword, words, wordIdx + 1);
                        unPlaceRight(crossword, words, i, j, wordIdx, placed)
                    }
                    // if (isSafeDown(crossword, words, i, j, wordIdx)) {
                    //     console.log('safe for ', words[wordIdx]);
                    //     let placed = placeDown(crossword, words, i, j, wordIdx);
                    //     solv(crossword, words, wordIdx + 1);
                    //     unPlaceDown(crossword, words, i, j, wordIdx, placed)
                    // }

                }

            }
        }
    }

    solv(input, words, 0);


</script>